---
import { Image } from "astro:assets";
import type { Sponsor } from "../@types/sponsors";

interface Props {
  data: Sponsor;
}

const { data }: Props = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>("../data/images/sponsors/*.{png,jpg,jpeg,svg,webp}", {
  eager: true,
});
const image = Object.values(images).find((img) => img.default.src.includes(data.logo));

if (!image) {
  throw new Error(`"${data.logo}" does not exist in glob: "src/data/images/sponsors/*.{png,jpg,jpeg,svg,webp}"`);
}
---

<a
  href={data.url}
  target="_blank"
  rel="noopener noreferrer"
  class="group flex w-full max-w-xs flex-col items-center justify-center overflow-hidden rounded-lg border border-white/10 bg-[#04060F]/50 p-6 backdrop-blur-sm transition-all duration-200 hover:border-white/20"
  title={data.name}>
  <div class="mb-3">
    <span class="text-xs font-medium uppercase tracking-wide text-white/50"> Community Partner </span>
  </div>
  <div
    class="flex h-16 w-full items-center justify-center opacity-70 transition-opacity duration-200 group-hover:opacity-90">
    <Image src={image.default} alt={data.name} class="max-h-full max-w-full object-contain" />
  </div>
</a>
