---
import { SiFacebook, SiInstagram, SiThreads, SiX } from "@icons-pack/react-simple-icons";
import { Image } from "astro:assets";
import { Globe, Linkedin } from "lucide-react";
import type { Speaker } from "../@types/speakers";

interface Props {
  data: Speaker;
}

const { data }: Props = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>("../data/images/speakers/*.{png,jpg,jpeg,svg,webp}", {
  eager: true,
});
const image = Object.values(images).find((img) => img.default.src.includes(data.imageName));

if (!image) {
  throw new Error(`"${data.imageName}" does not exist in glob: "src/data/images/speakers/*.{png,jpg,jpeg,svg,webp}"`);
}
---

<div class="card mb-8">
  <div class="card-image bg-white p-4 lg:p-6">
    <Image
      src={image.default}
      alt={data.name}
      width={200}
      height={200}
      class:list={["h-full w-full object-cover grayscale"]}
    />
  </div>
  <div class="card-content mt-3 text-center">
    <div class="card-title mb-1 pt-3 text-base font-bold text-white lg:text-2xl">{data.name}</div>
    <div class="card-subtitle text-sm text-gray-200 lg:text-lg">{data.title}</div>
    <ul class="mt-2 flex flex-wrap justify-center gap-2">
      {
        data.socialUrl.map((url) => (
          <li>
            <a
              href={url}
              target="_blank"
              rel="noopener noreferrer"
              class="flex min-h-8 min-w-8 items-center justify-center rounded p-2 text-white transition-colors hover:bg-white/10 hover:text-blue-400"
              title={url}>
              {url.includes("x.com") || url.includes("twitter.com") ? (
                <SiX className="h-4 w-4 " client:load />
              ) : url.includes("facebook.com") ? (
                <SiFacebook className="h-4 w-4 " client:load />
              ) : url.includes("linkedin.com") ? (
                <Linkedin className="h-4 w-4 " client:load />
              ) : url.includes("instagram.com") ? (
                <SiInstagram className="h-4 w-4 " client:load />
              ) : url.includes("threads.net") ? (
                <SiThreads className="h-4 w-4 " client:load />
              ) : (
                <Globe className="h-4 w-4 " client:load />
              )}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</div>
