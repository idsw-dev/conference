---
import { SiFacebook, SiInstagram, SiThreads, SiX } from "@icons-pack/react-simple-icons";
import { ExternalLink, Mail } from "lucide-react";
import type { Agenda } from "../@types/agenda";
import type { Faq } from "../@types/faq";
import type { SocialMedia } from "../@types/social-media";
import type { Speaker } from "../@types/speakers";
import type { Sponsor } from "../@types/sponsors";
import Accordion from "../components/Accordion";
import CardSpeaker from "../components/CardSpeaker.astro";
import CardSponsor from "../components/CardSponsor.astro";
import CFPSpeaker from "../components/CFPSpeaker.astro";
import EventAgenda from "../components/EventAgenda";
import TalkshowSpeaker from "../components/TalkshowSpeaker.astro";
import Timer from "../components/Timer";
import { BlurFade } from "../components/ui/blur-fade";
import { NumberTicker } from "../components/ui/number-ticker";
import Layout from "../layout.astro";

const agenda = import.meta.glob("../data/agenda.json", { eager: true });
const faq = import.meta.glob("../data/faq.json", { eager: true });
const speakers = import.meta.glob("../data/speakers.json", { eager: true });
const sponsors = import.meta.glob("../data/sponsors.json", { eager: true });
const socialMediasJson = import.meta.glob("../data/social-media.json", { eager: true });

const agendaData: Agenda[] = Object.values(agenda).map((item) => (item as any).default)[0];
const speakersData: Speaker[] = Object.values(speakers).map((item) => (item as any).default)[0];
const sponsorsData: Sponsor[] = Object.values(sponsors).map((item) => (item as any).default)[0];
const faqData: Faq[] = Object.values(faq).map((item) => (item as any).default)[0];
const socialMedias: SocialMedia[] = Object.values(socialMediasJson).map((item) => (item as any).default)[0];

// Filter keynote speakers
const cfpSpeakers = speakersData.filter((speaker) => speaker.type === "keynote");
// Filter talkshow speakers
const talkshowSpeakers = speakersData.filter((speaker) => speaker.type === "talkshow");
// Filter regular speakers
const regularSpeakers = speakersData.filter((speaker) => speaker.type === "regular");
---

<Layout>
  <section id="hero" class="bg-dark relative flex w-full flex-col pt-32 pb-[60px] text-gray-900">
    <div class="container">
      <BlurFade delay={0.2} client:load>
        <div
          class="gradient-blue-hero card space-y-4 rounded-none bg-gradient-to-br from-white to-[#CAE1FF] px-4 py-12 text-center shadow-lg backdrop-blur-sm md:rounded-lg">
          <span class="hero-mask-overlay" aria-hidden="true"></span>
          <BlurFade delay={0.4} client:load>
            <h1
              class="mx-auto max-w-[700px] bg-white bg-clip-text text-center text-3xl leading-tight font-semibold tracking-tight text-transparent md:text-5xl lg:text-[40px]">
              The Biggest Community-Led Developer Conference in Indonesia
            </h1>
          </BlurFade>
          <BlurFade delay={0.6} client:load>
            <div class="my-8">
              <span class="bg-[#32598B] px-3 py-2 text-sm text-[#D9DFE9] sm:px-8 sm:text-base">
                <NumberTicker value={12} delay={0} className="text-sm text-[#D9DFE9] sm:text-base" client:load /> Speakers
                Will Talk About Artificial Intelligence
              </span>
            </div>

            <BlurFade delay={0.8} client:load>
              <p class="mb-1 text-gray-300">22-23 November 2025 | 08.30 - 17.30 WIB</p>
              <a
                href="https://share.google/ak3ZcZqco40dzN6kL"
                target="_blank"
                rel="noopener noreferrer"
                class="group inline-flex items-center gap-2 text-gray-300 transition-colors duration-300 hover:text-white hover:underline">
                <ExternalLink
                  className="h-4 w-4 opacity-0 transition-all duration-300 group-hover:translate-x-1 group-hover:opacity-100"
                  client:load
                />
                <span>Usmar Ismail Hall, Jakarta Selatan.</span>
              </a>
            </BlurFade>
            <BlurFade delay={1.0} client:load>
              <div class="my-6 flex justify-center">
                <a
                  href="https://www.loket.com/event/idsw-2025"
                  target="_blank"
                  class="inline-flex items-center justify-center rounded-lg bg-white px-6 py-3 text-base font-semibold text-[#00235D] transition-all duration-300 hover:scale-105 hover:shadow-xl">
                  Get Your Tickets Now !
                </a>
              </div>
            </BlurFade>
            <BlurFade delay={1.2} client:load>
              <div class="flex flex-col items-center gap-3">
                <Timer client:load />
              </div>
            </BlurFade>
          </BlurFade>
        </div>
      </BlurFade>
    </div>
  </section>
  <section id="description" class="py-8">
    <div class="container text-center">
      <BlurFade delay={0.3} client:load>
        <p class="text-md px-8 leading-relaxed font-light text-white/70 sm:text-xl">
          IDSW is Indonesia's biggest community-led developer conference. Organized by Perkodi and various tech
          communities, this year's mission is to explore Artificial Intelligence and its impact through in-depth
          sessions, discussions, and collaboration.
        </p>
      </BlurFade>
    </div>
  </section>

  <!-- CFP Speakers Section -->
  {
    cfpSpeakers.length > 0 && (
      <section id="keynote-speakers" class="relative z-10 bg-[#080814] bg-gradient-to-b py-12 text-white">
        <div class="container mx-auto px-12">
          <div class="mx-auto text-center">
            <BlurFade delay={0.2} client:load>
              <div class="section-header mb-8">
                <h2 class="mb-2 text-2xl font-bold md:text-3xl">Keynote Speakers</h2>
                <span class="text-xl">Distinguished speakers and industry leaders</span>
              </div>
            </BlurFade>
            <div class="section-content">
              <div class="grid grid-cols-1 gap-6 text-left lg:grid-cols-2 lg:gap-8">
                {cfpSpeakers.map((speaker, index) => (
                  <BlurFade delay={0.4 + index * 0.1} client:load>
                    <CFPSpeaker data={speaker} />
                  </BlurFade>
                ))}
              </div>
            </div>
          </div>
        </div>
      </section>
    )
  }

  <!-- Talkshow Speakers Section -->
  {
    talkshowSpeakers.length > 0 && (
      <section id="talkshow-speakers" class="relative z-10 bg-[#080814] bg-gradient-to-b py-12 text-white">
        <div class="container mx-auto px-12">
          <div class="mx-auto text-center">
            <BlurFade delay={0.2} client:load>
              <div class="section-header mb-8">
                <h2 class="mb-2 text-2xl font-bold md:text-3xl">Talk Show</h2>
                <span class="text-xl">Gacor di Era AI, masih Bisa?!</span>
              </div>
            </BlurFade>
            <div class="section-content">
              <div class="grid grid-cols-1 gap-6 text-left lg:grid-cols-2 lg:gap-8">
                {talkshowSpeakers.map((speaker, index) => (
                  <BlurFade delay={0.4 + index * 0.1} client:load>
                    <TalkshowSpeaker data={speaker} />
                  </BlurFade>
                ))}
              </div>
            </div>
          </div>
        </div>
      </section>
    )
  }

  <!-- Speakers Section -->
  <section id="speakers" class="relative z-10 bg-[#080814] bg-gradient-to-b py-12 text-white">
    <div class="container mx-auto px-12">
      <div class="mx-auto text-center">
        <BlurFade delay={0.2} client:load>
          <div class="section-header mb-8">
            <h2 class="mb-2 text-2xl font-bold md:text-3xl">Meet Our Speakers</h2>
            <span class="text-xl">Experts from across the tech community</span>
          </div>
        </BlurFade>
        <div class="section-content">
          <div class="grid grid-cols-1 gap-6 text-left lg:grid-cols-2 lg:gap-8">
            {
              regularSpeakers.map((speaker, index) => (
                <BlurFade delay={0.4 + index * 0.1} client:load>
                  <CardSpeaker data={speaker} />
                </BlurFade>
              ))
            }
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Sponsors Section -->
  <section id="sponsors" class="relative z-10 bg-[#080814] bg-gradient-to-b py-20 text-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-12">
      <div class="mx-auto max-w-6xl text-center">
        <BlurFade delay={0.2} client:load>
          <div class="section-header mb-12">
            <h2 class="mb-2 text-2xl font-bold md:text-3xl">Supported by</h2>
            <span class="text-xl">Our valued partners making this event possible</span>
          </div>
        </BlurFade>
        <div class="section-content space-y-8">
          {
            (() => {
              const titleSponsors = sponsorsData.filter((s) => s.tier === "title");
              const goldSponsors = sponsorsData.filter((s) => s.tier === "gold");
              const silverSponsors = sponsorsData.filter((s) => s.tier === "silver");

              return (
                <>
                  {titleSponsors.length > 0 && (
                    <div class="mx-auto max-w-3xl">
                      {titleSponsors.map((sponsor, index) => (
                        <BlurFade delay={0.4 + index * 0.1} client:load>
                          <CardSponsor data={sponsor} />
                        </BlurFade>
                      ))}
                    </div>
                  )}
                  {goldSponsors.length > 0 && (
                    <div class="mx-auto grid max-w-4xl grid-cols-1 gap-6 sm:grid-cols-2">
                      {goldSponsors.map((sponsor, index) => (
                        <BlurFade delay={0.5 + index * 0.1} client:load>
                          <CardSponsor data={sponsor} />
                        </BlurFade>
                      ))}
                    </div>
                  )}
                  {silverSponsors.length > 0 && (
                    <div
                      class={`mx-auto ${silverSponsors.length === 1 ? "max-w-md" : "grid max-w-5xl grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"}`}>
                      {silverSponsors.map((sponsor, index) => (
                        <BlurFade delay={0.6 + index * 0.1} client:load>
                          <CardSponsor data={sponsor} />
                        </BlurFade>
                      ))}
                    </div>
                  )}
                </>
              );
            })()
          }
        </div>
      </div>
    </div>
  </section>

  <!-- Event Agenda Section -->
  <EventAgenda data={agendaData} client:load />

  <!-- Highlight Section -->
  <!-- <section id="highlight" class="from-dark to-darkblue relative z-10 bg-gradient-to-b py-12 text-white">
  <div class="x-4 container mx-auto">
    <div class="mx-auto">
      <div class="section-header mb-8 flex justify-between">
        <div class="section-header-left">
          <h2 class="mb-2 text-2xl font-bold md:text-3xl">Highlight from Last Year</h2>
          <span class="text-xl">See how our community came together in 2024</span>
        </div>
        <div class="section-header-right flex gap-5 text-center">
          <div>
            <span class="block text-4xl font-bold">20</span>
            <span class="text-xl">Speakers</span>
          </div>
          <div>
            <span class="block text-4xl font-bold">300+</span>
            <span class="text-xl">Participants</span>
          </div>
          <div>
            <span class="block text-4xl font-bold">16</span>
            <span class="text-xl">Sessions</span>
          </div>
        </div>
      </div>
      <div class="section-content">
        <div class="highlight-photos mb-8 grid grid-cols-1 gap-6 text-left lg:grid-cols-7">
          <img src="/img-placeholder.jpg" alt="event" class="h-[200px] w-full rounded-3xl object-cover lg:col-span-2" />
          <img src="/img-placeholder.jpg" alt="event" class="h-[200px] w-full rounded-3xl object-cover lg:col-span-3" />
          <img src="/img-placeholder.jpg" alt="event" class="h-[200px] w-full rounded-3xl object-cover lg:col-span-2" />
        </div>

        <div class="highlight-cards grid grid-cols-1 gap-5 lg:grid-cols-7">
          <div class="card-highlight rounded-3xl border border-white/30 bg-[#8BA6FF1A] p-5 lg:col-span-3">
            <div class="card-header mb-3">
              <h3 class="text-lg font-bold">Andi Pratama</h3>
              <p>Software Engineer</p>
            </div>
            <p>
              "Acara tahun lalu membahas berbagai topik teknologi, mulai dari cloud, mobile, hingga AI. Saya pulang
              dengan banyak ide baru yang langsung bisa saya terapkan di proyek."
            </p>
          </div>
          <div class="card-highlight rounded-3xl border border-white/30 bg-[#8BA6FF1A] p-5 lg:col-span-2">
            <div class="card-header mb-3">
              <h3 class="text-lg font-bold">Andi Pratama</h3>
              <p>Software Engineer</p>
            </div>
            <p>
              “Bagi saya yang masih mahasiswa, konferensi ini jadi kesempatan langka untuk belajar langsung dari
              praktisi industri dan melihat tren teknologi terbaru."
            </p>
          </div>
          <div class="card-highlight rounded-3xl border border-white/30 bg-[#8BA6FF1A] p-5 lg:col-span-2">
            <div class="card-header mb-3">
              <h3 class="text-lg font-bold">Andi Pratama</h3>
              <p>Software Engineer</p>
            </div>
            <p>
              “Bagi saya yang masih mahasiswa, konferensi ini jadi kesempatan langka untuk belajar langsung dari
              praktisi industri dan melihat tren teknologi terbaru."
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section> -->

  <div class="bg-gradient-to-b from-[#080814] via-[#1A3182] to-[#8EB6F3] px-8 text-white">
    <section id="faq" class="container mx-auto pt-18 text-center">
      <BlurFade delay={0.2} client:load>
        <div class="section-header">
          <h2 class="mb-8 text-center text-3xl !leading-relaxed font-bold md:text-4xl">Frequently Asked Questions</h2>
        </div>
      </BlurFade>
      <BlurFade delay={0.4} client:load>
        <Accordion data={faqData} client:load />
      </BlurFade>
    </section>

    <section id="contact" class="container mx-auto pt-18 pb-12 text-center">
      <BlurFade delay={0.2} client:load>
        <h2 class="mb-3 text-3xl font-bold" id="contact">Updates & Questions</h2>
        <p class="mb-8 text-lg">
          See the event update on our social media platforms and contact us if you have any questions.
        </p>
      </BlurFade>

      <BlurFade delay={0.4} client:load>
        <ul class="flex justify-center">
          <ul class="social-medias flex flex-wrap gap-3">
            {
              socialMedias.map((socmed: SocialMedia) => {
                if (socmed.name === "Email") {
                  return (
                    <a
                      target="_blank"
                      href={socmed.url}
                      class="flex min-h-12 min-w-12 items-center rounded-lg border-white/20 bg-white/10 p-3"
                      title={socmed.name}>
                      <Mail className="h-6 w-6" client:load />
                    </a>
                  );
                }

                if (socmed.name === "X") {
                  return (
                    <a
                      target="_blank"
                      href={socmed.url}
                      class="flex min-h-12 min-w-12 items-center rounded-lg border-white/20 bg-white/10 p-3"
                      title={socmed.name}>
                      <SiX className="h-6 w-6" client:load />
                    </a>
                  );
                }

                if (socmed.name === "Instagram") {
                  return (
                    <a
                      target="_blank"
                      href={socmed.url}
                      class="flex min-h-12 min-w-12 items-center rounded-lg border-white/20 bg-white/10 p-3"
                      title={socmed.name}>
                      <SiInstagram className="h-6 w-6" client:load />
                    </a>
                  );
                }

                if (socmed.name === "Threads") {
                  return (
                    <a
                      target="_blank"
                      href={socmed.url}
                      class="flex min-h-12 min-w-12 items-center rounded-lg border-white/20 bg-white/10 p-3"
                      title={socmed.name}>
                      <SiThreads className="h-6 w-6" client:load />
                    </a>
                  );
                }

                if (socmed.name === "Facebook") {
                  return (
                    <a
                      target="_blank"
                      href={socmed.url}
                      class="flex min-h-12 min-w-12 items-center rounded-lg border-white/20 bg-white/10 p-3"
                      title={socmed.name}>
                      <SiFacebook className="h-6 w-6" client:load />
                    </a>
                  );
                }
                return null;
              })
            }
          </ul>
        </ul>
      </BlurFade>
    </section>
  </div>
</Layout>
